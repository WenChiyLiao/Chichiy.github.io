<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        #greenTomato{
            width: 100px;
            height: 100px;
            background-color: var(--tomatoColor);
            position: relative;
        }

        #redTomato{
            background-color: red;
            width: 100px;
            height: 0px;
            position: absolute;
            bottom:0%

        }
        :root{--tomatoColor: #00ff00;
        }

        .hide{
            display: none;
        }
    </style>
    
</head>
<body>
    <div id="greenTomato">
    <div id="redTomato"></div><br><br><br><br>
    <div id="display">25 : 00</div>
    <br> 
    <button type="button" id="minus5">-</button>
    <button type="button" id="start">start</button> 
    <button type="button" id="stop" class="hide">stop</button>
    <button type="button" id="plus5">+</button>
    <div id="try"></div>


<script type="text/javascript">

//preset
    var time = 25;
    var display = document.getElementById("display");
    document.getElementById("plus5").onclick = function(){changeTime(1);};
    document.getElementById("minus5").onclick = function(){changeTime(0);};
    document.getElementById('start').onclick= function(){timer(time);};

//control   
    //input time 
        function changeTime(par){   
            if (par == 1 ){time += 5;
            } else {time -= 5;
            }
            display.innerHTML = time + " : 00";
            console.log(time);
        }

    //start-stop switch
        function toggle(){
            document.getElementById("stop").classList.toggle("hide");
            document.getElementById("start").classList.toggle("hide");
            document.getElementById("plus5").classList.toggle("hide");
            document.getElementById("minus5").classList.toggle("hide");
        }

    //timer 
        function timer(min){
            var duration = min*60, sec = 0, count = 0, col = 0, height = 0;
            toggle();
            var timeoutId = setInterval(countdown, 1000);

        //countdown
            function countdown(){

            //logic  
                if (sec == 0){
                    min -= 1;
                    sec = 60;
                }    
                sec -= 1;
                count ++;
            
            //stop countdown
                if (min + sec == 0) {
                    clearInterval(timeoutId);
                }

            //display remaining time
                if(sec < 10){
                    display.innerHTML = min + " : 0" + sec;
                } else {
                    display.innerHTML = min + " : " + sec;
                }

            //change color
                col = 120 * (1- count/duration);
                document.documentElement.style.setProperty('--tomatoColor', 'hsl(' + col +',100%,50%)');
            }

        //reset timer, display, color
            document.getElementById("stop").onclick = function(){reset();}
            function reset() {
                if (confirm("你確定要放棄嗎> <？???")) {
                    clearInterval(timeoutId);
                    time = 25;
                    display.innerHTML = time + " : 00";
                    document.documentElement.style.setProperty('--tomatoColor', 'hsl(120,100%,50%)');
                    console.log(time+' '+min+' '+sec+" reset");
                    toggle();
                } else {}
            }
        }




        </script>
    </body>
</html>